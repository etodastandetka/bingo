# üîß –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

## –ë—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç `.env` —Ñ–∞–π–ª:

```bash
cd admin
npx tsx scripts/fix-connection-pool.ts
```

–°–∫—Ä–∏–ø—Ç:
- ‚úÖ –ù–∞–π–¥–µ—Ç `DATABASE_URL` –≤ `.env`
- ‚úÖ –î–æ–±–∞–≤–∏—Ç `connection_limit=100` –∏ `pool_timeout=60`
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é `.env`
- ‚úÖ –û–±–Ω–æ–≤–∏—Ç —Ñ–∞–π–ª

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã:
```bash
pm2 restart all
```

## –†—É—á–Ω–æ–π —Å–ø–æ—Å–æ–±

–ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –æ–±–Ω–æ–≤–∏—Ç–µ `.env` –≤—Ä—É—á–Ω—É—é:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `admin/.env`
2. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É `DATABASE_URL`
3. –î–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

**–ë—ã–ª–æ:**
```
DATABASE_URL="postgresql://gen_user:dastan10dz@92.51.38.85:5432/default_db"
```

**–°—Ç–∞–ª–æ:**
```
DATABASE_URL="postgresql://gen_user:dastan10dz@92.51.38.85:5432/default_db?connection_limit=100&pool_timeout=60"
```

4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª
5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ: `pm2 restart all`

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
```bash
cd admin
npx tsx scripts/check-connection-pool.ts
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
- ‚úÖ connection_limit: 100
- ‚úÖ pool_timeout: 60

