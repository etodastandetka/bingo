/**
 * –°–∫—Ä–∏–ø—Ç –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±—ã—Å—Ç—Ä—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
 * –ó–∞–ø—É—Å–∫: npm run init:quick-replies
 */

import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

const defaultReplies = [
  '–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞?',
  '–ß–µ–º –ø–æ–º–æ—á—å?',
  '–í—ã–≤–æ–¥ –¥–æ 3—Ö',
  '–ó–∞—è–≤–∫—É –Ω–∞ –ø–ø',
  '–ö–∞–∫ –≤—ã–≤–µ—Å—Ç–∏',
  '–ò—Å—Ç–æ—Ä–∏—è —Å—á–µ—Ç–∞',
  '–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç',
  '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –∑–∞–¥–∞–≤–∞–π—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å –æ–ø–µ—Ä–∞—Ç–æ—Ä –æ—Ç–≤–µ—Ç–∏—Ç –≤–∞–º –≤ —Ç–µ—á–µ–Ω–∏–∏ 24 —á–∞—Å–æ–≤. –°—Ä–∞–∑—É –ø—Ä–∏—Å—ã–ª–∞–π—Ç–µ —Å—É–º–º—É –≤—ã–≤–æ–¥–∞ –∏–ª–∏ —á–µ–∫ –ø—Ä–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏',
]

async function initQuickReplies() {
  console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±—ã—Å—Ç—Ä—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤...')
  console.log('='.repeat(60))

  try {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –±—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã
    const existingCount = await prisma.quickReply.count()
    
    if (existingCount > 0) {
      console.log(`‚ö†Ô∏è  –£–∂–µ –µ—Å—Ç—å ${existingCount} –±—ã—Å—Ç—Ä—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤. –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é.`)
      console.log('üí° –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–¥–º–∏–Ω–∫—É –∏–ª–∏ API.')
      return
    }

    // –î–æ–±–∞–≤–ª—è–µ–º –±—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    console.log(`üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ ${defaultReplies.length} –±—ã—Å—Ç—Ä—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤...`)
    
    for (let i = 0; i < defaultReplies.length; i++) {
      const reply = await prisma.quickReply.create({
        data: {
          text: defaultReplies[i],
          order: i + 1,
        },
      })
      console.log(`  ‚úÖ ${i + 1}. "${reply.text}"`)
    }

    console.log(`\n‚úÖ –£—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ ${defaultReplies.length} –±—ã—Å—Ç—Ä—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤!`)
    console.log('üí° –¢–µ–ø–µ—Ä—å –æ–Ω–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —á–∞—Ç–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –º–æ–ª–Ω–∏–∏ (‚ö°)')

  } catch (error: any) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error.message)
  } finally {
    await prisma.$disconnect()
  }
}

initQuickReplies()










