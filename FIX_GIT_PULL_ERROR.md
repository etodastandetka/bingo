# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "refusing to merge unrelated histories" –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ `git pull` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—à–∏–±–∫–∏:
1. `fatal: refusing to merge unrelated histories`
2. `Committer identity unknown` / `fatal: unable to auto-detect email address`

## üîß –®–ê–ì 0: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Git (–µ—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞ "Committer identity unknown")

**–í–ê–ñ–ù–û**: –°–Ω–∞—á–∞–ª–∞ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ Git, –∏–Ω–∞—á–µ merge commit –Ω–µ —Å–æ–∑–¥–∞—Å—Ç—Å—è!

```bash
# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–º—è –∏ email –¥–ª—è Git (–≥–ª–æ–±–∞–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤)
git config --global user.email "admin@bingo.kg"  # –∏–ª–∏ –ª—é–±–æ–π –≤–∞—à email
git config --global user.name "Server Admin"     # –∏–ª–∏ –ª—é–±–æ–µ –∏–º—è

# –ò–ª–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
cd /var/www/bingo_bot  # –∏–ª–∏ /var/www/luxon/admin_nextjs –µ—Å–ª–∏ —ç—Ç–æ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
git config user.email "admin@bingo.kg"
git config user.name "Server Admin"
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –†–∞–∑—Ä–µ—à–∏—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ—Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∏—Å—Ç–æ—Ä–∏–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
cd /var/www/bingo_bot

# –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git fetch origin

# –î–µ–ª–∞–µ–º pull —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ—Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∏—Å—Ç–æ—Ä–∏–π
git pull origin main --allow-unrelated-histories

# –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –∏—Ö –∏ —Å–¥–µ–ª–∞–π—Ç–µ:
# git add .
# git commit -m "Merge unrelated histories"
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (–µ—Å–ª–∏ –Ω–µ—Ç –≤–∞–∂–Ω—ã—Ö –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π)

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï**: –≠—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç —É–¥–∞–ª–∏—Ç –≤—Å–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!

```bash
cd /var/www/bingo_bot

# –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
git stash

# –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git fetch origin

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Å —É–¥–∞–ª–µ–Ω–Ω–æ–π –≤–µ—Ç–∫–æ–π
git reset --hard origin/main
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ update-admin.sh)

–ò–∑–º–µ–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç `update-admin.sh` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
cd /var/www/bingo_bot

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç
nano update-admin.sh

# –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
# git pull

# –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞:
# git pull origin main --allow-unrelated-histories || git pull origin main
```

## üìã –ü–æ–ª–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# 0. –°–ù–ê–ß–ê–õ–ê –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ Git (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
git config --global user.email "admin@bingo.kg"
git config --global user.name "Server Admin"

# 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /var/www/bingo_bot
# –ò–õ–ò –µ—Å–ª–∏ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä /var/www/luxon/admin_nextjs):
# cd /var/www/luxon/admin_nextjs

# 2. –ü–æ–ª—É—á–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git fetch origin

# 3. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ (—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ—Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∏—Å—Ç–æ—Ä–∏–π)
git pull origin main --allow-unrelated-histories

# 4. –ï—Å–ª–∏ –µ—Å—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –∏—Ö:
# git add .
# git commit -m "Resolve merge conflicts"

# 5. –û–±–Ω–æ–≤–∏—Ç–µ Admin Panel
cd admin
npm install
npm run db:generate
rm -rf .next
npm run build

# 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ PM2
cd ..
pm2 restart bingo-admin

# 7. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
pm2 status bingo-admin
pm2 logs bingo-admin --lines 50
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å git
git status

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã
git log --oneline -5

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å origin/main
git log origin/main --oneline -3
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ:

- –ï—Å–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –µ—Å—Ç—å –≤–∞–∂–Ω—ã–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Å–Ω–∞—á–∞–ª–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏—Ö —á–µ—Ä–µ–∑ `git stash`
- –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –í –±—É–¥—É—â–µ–º –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `git pull origin main --allow-unrelated-histories` –µ—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç—Å—è
