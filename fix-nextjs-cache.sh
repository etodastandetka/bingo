#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ Next.js Server Actions
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–≥–¥–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è –æ—à–∏–±–∫–∏ —Ç–∏–ø–∞ "Failed to find Server Action"

cd /var/www/bingo_bot/admin || exit 1

echo "üîÑ –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ Next.js..."

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º PM2 –ø—Ä–æ—Ü–µ—Å—Å
pm2 stop bingo-admin

# –£–¥–∞–ª—è–µ–º –ø–∞–ø–∫—É .next (–∫–µ—à Next.js)
rm -rf .next

# –û—á–∏—â–∞–µ–º node_modules/.cache –µ—Å–ª–∏ –µ—Å—Ç—å
rm -rf node_modules/.cache

# –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç
echo "üì¶ –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞..."
npm run build

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–Ω–æ–≤–∞
echo "‚ñ∂Ô∏è  –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..."
pm2 restart bingo-admin

echo "‚úÖ –ì–æ—Ç–æ–≤–æ! –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–æ —Å —á–∏—Å—Ç—ã–º –∫–µ—à–µ–º."















